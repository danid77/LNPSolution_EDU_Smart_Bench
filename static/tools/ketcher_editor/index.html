<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width,initial-scale=1"/>
        <meta name="theme-color" content="#000000"/>
        <meta name="description" content="Ketcher is a web-based chemical structure editor"/>
        <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico"/>
        <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png"/>
        <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png"/>
        <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png"/>
        <link rel="manifest" href="./manifest.json"/>
        <title>Ketcher v3.4.0</title>
        <script defer="defer" src="./static/js/main.cca1a147.js"></script>
        <link href="./static/css/main.de62a271.css" rel="stylesheet">
    </head>
    <body>
        <noscript>You need to enable JavaScript to run this app.</noscript>
        <div id="root"></div>
    </body>
    <script>
    window.addEventListener("load", () => {
        console.log("✅ Ketcher 로딩 완료됨");

        function makeButton(text, bgColor) {
            const btn = document.createElement("button");
            btn.textContent = text;
            btn.style.position = "fixed";
            btn.style.bottom = "3px";
            btn.style.zIndex = 9999;
            btn.style.padding = "8px 16px";
            btn.style.background = bgColor;
            btn.style.color = "white";
            btn.style.border = "none";
            btn.style.borderRadius = "4px";
            btn.style.cursor = "pointer";
            return btn;
        }

        // ✅ SMILES 추출 버튼 (오른쪽 끝)
        const sendButton = makeButton("✅ SMILES 추출 후 전송", "#4caf50");
        sendButton.style.right = "60px";

        sendButton.onclick = async () => {
            if (!window.ketcher) {
                alert("Ketcher 로딩 중입니다.");
                return;
            }
            const smiles = await window.ketcher.getSmiles();
            console.log("📤 SMILES:", smiles);
            window.parent.postMessage({ type: "smiles", value: smiles }, "*");
        };

        // 🔁 리셋 버튼 (조금 왼쪽으로 띄움)
        const resetButton = makeButton("🔄 리셋", "#f44336");
        resetButton.style.right = "240px";  // ← 버튼 간격 벌리기

        resetButton.onclick = async () => {
            if (!window.ketcher) {
                alert("Ketcher 로딩 중입니다.");
                return;
            }
            await window.ketcher.setMolecule("");
            console.log("🧼 구조 리셋됨");
        };

        document.body.appendChild(sendButton);
        document.body.appendChild(resetButton);
    });
    </script>


</html>